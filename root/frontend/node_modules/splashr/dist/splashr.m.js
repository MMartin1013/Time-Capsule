import n from"@use-it/event-listener";import e from"prop-types";import t,{useState as r,useEffect as i,Fragment as o,useRef as l,Suspense as u,useMemo as a}from"react";var c=function(e){var u=e.splash,a=e.children,c=e.transitionTime,m=e.transitionTimingFunction,s=function(n,e){void 0===e&&(e=!1);var t=r(!0),o=t[0],l=t[1];return i(function(){var e=setTimeout(function(){return l(!1)},n);return function(){return clearTimeout(e)}},[n]),o||e}(e.minDelay,e.extend),p=r(!1),f=p[0],d=p[1],v=l();return s||c||f||d(!0),n("transitionend",function(){d(!0),v.current=null},c?v.current:null),f?a:t.createElement(o,null,a,!f&&t.createElement("div",{ref:v,style:Object.assign({},{position:"fixed",margin:0,padding:0,top:0,left:0,right:0,bottom:0,opacity:s?1:0},c?{transition:"opacity "+c+"ms "+m}:{})},u))};c.propTypes={splash:e.element.isRequired,children:e.element,minDelay:e.number,extend:e.bool,transitionTime:e.number,transitionTimingFunction:e.string},c.defaultProps={children:null,minDelay:2e3,extend:void 0,transitionTime:700,transitionTimingFunction:"ease"};var m=function(n){var e=n.onUnmount;return i(function(){return function(){e()}},[e]),null};var s=function(n){var e=n.children,i=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&-1===e.indexOf(r)&&(t[r]=n[r]);return t}(n,["children"]),l=r(!0),s=l[0],p=l[1],f=a(function(){return t.createElement(m,{onUnmount:function(){return p(!1)}})},[p]);return t.createElement(o,null,t.createElement(u,{fallback:f},s?e:null),t.createElement(c,Object.assign({},i,{extend:s}),s?null:e))};s.propTypes={children:e.element},s.defaultProps={children:null},c.Suspense=s;export default c;
